<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="javaEE加强, BensonFuck">
    <meta name="description" content="javaEE基础加强
异常，泛型，集合框架
stream流
File，字符集，IO流框架
多线程
网络编程
java高级技术

异常体系（java.lang.Throuable）Error：是系统级别的异常，Sun公司自己用的
Except">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>javaEE加强 | BensonFuck</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">BensonFuck</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>主页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories/%E6%88%91%E7%9A%84%E9%9D%92%E6%98%A5" class="waves-effect waves-light">
      
      <i class="fas fa-film" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-file-zipper" style="zoom: 0.6;"></i>
      
      <span>档案</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-address-card" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">BensonFuck</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			主页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories/%E6%88%91%E7%9A%84%E9%9D%92%E6%98%A5" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-film"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-file-zipper"></i>
			
			档案
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-card"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/4.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">javaEE加强</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">No tag</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/java/" class="post-category">
                                java
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2025-11-15
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2025-11-16
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    8.7k
                </div>
                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h3 id="javaEE基础加强"><a href="#javaEE基础加强" class="headerlink" title="javaEE基础加强"></a>javaEE基础加强</h3><ol>
<li>异常，泛型，集合框架</li>
<li>stream流</li>
<li>File，字符集，IO流框架</li>
<li>多线程</li>
<li>网络编程</li>
<li>java高级技术</li>
</ol>
<h3 id="异常体系（java-lang-Throuable）"><a href="#异常体系（java-lang-Throuable）" class="headerlink" title="异常体系（java.lang.Throuable）"></a>异常体系（java.lang.Throuable）</h3><p>Error：是系统级别的异常，Sun公司自己用的</p>
<p>Exception（开发人员控制）：</p>
<ul>
<li>Runtime Exception:运行异常</li>
<li>其他异常（红线提醒）</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用try（）{}catch{} 捕获异常，（）内为执行后close（）线程部分，可以省略</span></span><br><span class="line"><span class="keyword">try</span>{</span><br><span class="line">    </span><br><span class="line">}<span class="keyword">catch</span>(Exception e){</span><br><span class="line">    e.  <span class="comment">// 调用打印输出异常内容</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ctrl+enter将异常抛出到上一层	</span></span><br></pre></td></tr></tbody></table></figure>

<p>tip：idea中ctrl + alt + t 快速创建try{…}catch{…}</p>
<p>异常作用：</p>
<p>可以作为方法的一种特殊返回值，以便通知上层调用者方法执行问题(外抛异常： <code>throw   new  Exception(" ");</code>)</p>
<p>异常：代码编译或运行时可能出现的错误</p>
<p>自定义异常:</p>
<p>java无法为世界上全部问题提供异常类来代表（java目前逐步放弃编译异常，以运行异常为主）</p>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><ol>
<li>抛出异常提示信息</li>
<li>最外层捕获异常后，尝试修复</li>
</ol>
<h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><p>定义类，接口，方法时，同时声明了一个或多个类型变量（如：<e> ）</e></p>
<p>作用：在编译阶段约束所能操作的数据类型，并自动进行检查能力</p>
<p>本质：把具体的变量类型传给类型变量</p>
<p><strong>泛型接口方法（架构师）</strong>：</p>
<p>建类变量用 E（元素类型），T（返回Type），K（键类型），V（值类型）全部大写</p>
<p>方法，通配符，上下限</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> (name) (T (name))</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T (name) (T (name))</span><br></pre></td></tr></tbody></table></figure>

<p>tip:通配符就是“？”  可以使用泛型代表一切类型，ETKV是定义泛型时使用</p>
<p><strong>通配符问题，其他什么狗也能进来，于是引出上下限</strong></p>
<p>泛型上限：<code>? extends Car:?</code>  能接Car或其子类</p>
<p>泛型下限：<code>? super Car:?</code>  能接Car或其父类</p>
<p><strong>泛型不支持的基本数据类型，只支持对象类型（引用数据类型）</strong></p>
<p>解决方式（包装类），万物皆对象的思想</p>
<p>基本数据类型包装成对象的类型：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> -&gt; Integer</span><br><span class="line"><span class="type">char</span> -&gt; Character </span><br><span class="line"><span class="comment">// 其他基本是首字母大写</span></span><br><span class="line"><span class="comment">// 这就转成了对象类型</span></span><br></pre></td></tr></tbody></table></figure>

<p>手动包装：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">it1</span> <span class="operator">=</span> Integer.valueOf(<span class="number">100</span>);</span><br><span class="line"><span class="type">Integer</span> <span class="variable">it2</span> <span class="operator">=</span> Integer.valueOf(<span class="number">100</span>); <span class="comment">// -128~127 源码</span></span><br><span class="line">it1 == it2;  <span class="comment">//一个cache缓存</span></span><br></pre></td></tr></tbody></table></figure>

<p>自动装箱：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add();  <span class="comment">//自动装箱</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> list.get(); <span class="comment">// 自动拆箱</span></span><br></pre></td></tr></tbody></table></figure>

<p>Api：</p>
<p><code>Integer.parseInt(String s)</code> 把字符串类型的数值转换成数值本身对应的真实类型</p>
<p><code>Integer.valueOf(String s)</code>  把基本数据类型转字符串类型</p>
<p><code>toString(double d)</code></p>
<p><code>toString()</code></p>
<h3 id="集合框架"><a href="#集合框架" class="headerlink" title="集合框架"></a>集合框架</h3><p>（Collection/Map两大框架）</p>
<h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection<e></e></h3><ul>
<li>list<e><ol>
<li>ArrayList<e></e></li>
<li>LinkedList<e></e></li>
</ol>
</e></li>
<li>set<e><ol>
<li>HashSet<e>  -&gt;  LinkedHashSet<e></e></e></li>
<li>TreeSet<e></e></li>
</ol>
</e></li>
</ul>
<p>List集合：添加元素有序，可重复，有索引</p>
<p>Set集合：无序，不重复，无索引（LinkedHashSet除外）</p>
<p><strong>常用方法：</strong></p>
<p><code>add(E e)</code> 添加</p>
<p><code>clear()</code>  清除所有元素</p>
<p><code>remove(E e)</code>  指定对象在集合中删除</p>
<p><code>contains(Object obj)</code>  判断是否含指对象</p>
<p><code>isEmpty()</code>  判断是否为空</p>
<p><code>toArray()</code>  把集合中元素，存储到数组中</p>
<p>collection家族的3种遍历方式：</p>
<p>​	迭代器是用来遍历集合的专用方式，java的迭代器代表是Iterator</p>
<p><strong>方法名：</strong></p>
<p>​	<code>hasNext()</code>  询问当前元素，存返回true  or  false（源码是 <code>return (name)  != size;</code> 索引来判断）</p>
<p>​	<code>E Next()</code>    获元素位置，并指向下一元素</p>
<p><strong>方式2：</strong></p>
<p><em><strong>增强for循环遍历</strong></em> 	for(元素的数据类型  变量名  ： 数组/集合{})</p>
<p><strong>方式3:</strong></p>
<p><em><strong>Lambda表达式</strong></em>（JDK8开始）	forEach（） 结合Lambda遍历集合</p>
<p>3种遍历方式区别：<strong>并发修改异常问题</strong> </p>
<ol>
<li>补位（index） 方式一，做一个 <code>i--</code> 操作</li>
<li>无需<code>i--</code> 做倒序遍历方式</li>
</ol>
<p>2种迭代器（适用于无索引的情况）</p>
<p>tip： it.remove() 使用迭代器删除，不用list</p>
<p><strong>总结：</strong>增强for和Lambda只适合遍历（无法解决并发修改异常问题），不适合遍历并删除</p>
<p>​	有索引，用for循环</p>
<p>​	无索引，用迭代器删除</p>
<p><strong>ArrayList 底层基于数组存储数据（查询慢，从头开始遍历）</strong></p>
<p><strong>LinkedList 底层基于双链表（查询速度快，增删快，折半算法）</strong></p>
<p><strong>新增方法：</strong></p>
<ul>
<li><code>addFirst()</code>  头插元素</li>
<li><code>addLast()</code>  尾插元素</li>
<li><code>get...</code></li>
<li><code>remove...</code></li>
</ul>
<p>！！！ 独立功能，独立成方法！！！</p>
<h3 id="Set-集合"><a href="#Set-集合" class="headerlink" title="Set 集合"></a>Set<e> 集合</e></h3><p>HashSet：无序，不重复，无索引</p>
<p>LinkedHashSet：有序，不重复，无索引</p>
<p>TreeSet：排序，不重复，无索引</p>
<p><em><strong>底层原理：</strong></em></p>
<p>哈希值：一个<code>int</code>类型的随机值，java中每一个对象都有一个哈希值</p>
<p>java中所有对象，都可以调用Object类提供的HashCode方法，返回对象自己的哈希值</p>
<p><strong>不同对象，它们的哈希值大概率不相等，但可能相等（哈希碰撞）  int(-21亿~21亿多)</strong></p>
<p><em>HashSet底层：基于哈希表存储，</em></p>
<p>JDK8前：哈希表 = 数组 + 链表</p>
<p>JDK8后：哈希表 = 数组 + 链表 + 红黑树  （增删改查性能更佳）</p>
<table>
<thead>
<tr>
<th>Null</th>
<th>… …..</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>……….</td>
<td>16</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ol>
<li>new 后创建一个长度为16的数组，默认加载因子为0.75（16x0.75=12，默认到12扩容），数组名为table（tip：k8后，链表长度超过8，数组长度&gt;=64，自动转红黑树）</li>
<li>使用元素的哈希值（随机）对数组长度做运算，计算处应存入的位置</li>
<li>判断为NULL直接存入</li>
<li>不为NULL，表示有元素，调用equals方法比较相等，不存在不相等则存入</li>
</ol>
<p>tip：k8前，占老元素位置，k8后，挂老元素下面</p>
<h3 id="LinkedHashSet底层原理"><a href="#LinkedHashSet底层原理" class="headerlink" title="LinkedHashSet底层原理"></a>LinkedHashSet底层原理</h3><ol>
<li>基于哈希表（数组+链表+红黑树）</li>
<li>加了双链表机制记录前后元素位置（有序）</li>
</ol>
<p><strong>TreeSet集合一点要排序，解决无默认比较2种方法：</strong></p>
<ol>
<li>对象类型实现一个Comparable 比较接口，重写compare方法，指定比较大小规则</li>
<li><code>public TreeSet(Comparable c)</code> 集合自带比较器 Comparetor对象（实现<code>implements  Comparable&lt;E&gt;</code> 接口,重写ComparableTo（）方法）</li>
</ol>
<p><strong>规则：</strong></p>
<ol>
<li>t2.compareTo(t1)	左&gt;右，返回正整数</li>
<li>t2 == this  比较者         左&lt;右，返回负整数</li>
<li>t1  == 0    被比较者        返回0</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo1HashSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetDemo3</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 目标：搞清楚TreeSet集合对于自定义对象的排序</span></span><br><span class="line">        Set&lt;Teacher&gt; set = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Teacher&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Teacher o1, Teacher o2)</span> {</span><br><span class="line">                <span class="comment">//return o1.getAge() - o2.getAge(); // 升序,装逼写法有风险</span></span><br><span class="line">                <span class="keyword">return</span> Double.compare(o1.getAge(),o2.getAge()); <span class="comment">// 包装类底层方法</span></span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        <span class="comment">// Set&lt;Teacher&gt; set = new TreeSet&lt;&gt;((o1,o2) -&gt; Double.compare(o1.getAge(),o2.getAge()))</span></span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">"刘总"</span>,<span class="number">20</span>,<span class="number">6230.4</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">"杨总"</span>,<span class="number">18</span>,<span class="number">3000.2</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">"张总"</span>,<span class="number">20</span>,<span class="number">1999.9</span>));</span><br><span class="line">        System.out.println(set);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 结论：treeSet集合默认不能给自定义对象排序，因为不知道大小规则。</span></span><br><span class="line">        <span class="comment">// 结局两种方案</span></span><br><span class="line">        <span class="comment">// 1.对象实现Comparable比较接口，重写compare方法，指定大小比较规则。</span></span><br><span class="line">        <span class="comment">// 2.让TreeSet集合自带comparator自带比较器对象。指定大小比较规则</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="collection-–-Map"><a href="#collection-–-Map" class="headerlink" title="collection   –   Map"></a>collection   –   Map</h3><p>单例集合   –   双列集合（键值对集合）</p>
<p>Map&lt;K,V&gt;    （接口）:</p>
<ol>
<li><p>HashMap&lt;K,V&gt;   （无序，不重复，无索引）</p>
<p>LinkedHashMap&lt;K,V&gt;  (有序，不重复，无索引)</p>
</li>
<li><p>TreeMap&lt;K,V&gt;   （实现类，按大小默认升序，不重复，无索引）</p>
</li>
</ol>
<p>Map集合遍历方式1：键值对</p>
<p>​	定一个keys存键集合，遍历键调用get（）方法找值</p>
<p>​	增强for（元素类型  变量  ： 集合）{}</p>
<p>2，键值对方式：</p>
<p>​	java提供的<code>entrySet()</code> 方法（获取所有键值对集合）</p>
<p>​	再用增强for，调用<code>getkey（）</code>，<code>getValue()</code>方法调用</p>
<p>3，Lambda表达式</p>
<p>​	调用Map方法<code>forEach（）</code> ，里<code>new BiComsumer()</code>  方法重写输出</p>
<p>增强for遍历：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo2Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo2</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 目标：掌握map集合，map常用方法</span></span><br><span class="line">        Map&lt;String,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"嫦娥"</span>,<span class="number">20</span>);</span><br><span class="line">        map.put(<span class="string">"女儿国王"</span>,<span class="number">31</span>);</span><br><span class="line">        map.put(<span class="string">"嫦娥"</span>,<span class="number">28</span>);</span><br><span class="line">        map.put(<span class="string">"铁扇公主"</span>,<span class="number">38</span>);</span><br><span class="line">        map.put(<span class="string">"紫霞"</span>,<span class="number">31</span>);</span><br><span class="line">        map.put(<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line">        System.out.println(map.get(<span class="string">"嫦娥"</span>));</span><br><span class="line">        System.out.println(map.containsKey(<span class="string">"嫦娥"</span>));</span><br><span class="line">        System.out.println(map.containsValue(<span class="number">28</span>));</span><br><span class="line">        System.out.println(map.remove(<span class="string">"嫦娥"</span>)); <span class="comment">// 根据键删除整个键值对</span></span><br><span class="line"><span class="comment">//        map.clear();</span></span><br><span class="line"><span class="comment">//        System.out.println(map);</span></span><br><span class="line">        System.out.println(map.isEmpty()); <span class="comment">// 判断是否为空</span></span><br><span class="line">        System.out.println(map.size());</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">        <span class="keyword">for</span>(String key : keys){</span><br><span class="line">            System.out.println(key);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>这是一种多态写法：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo2Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapTest6</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 目标：完成map集合相关案例，投票统计程序</span></span><br><span class="line">        calc();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">calc</span><span class="params">()</span>{</span><br><span class="line">        <span class="comment">// 1.把80个学生选择的景点数据拿到程序中，才能统计</span></span><br><span class="line">        List&lt;String&gt; locations = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        String[] names = {<span class="string">"天安门"</span>,<span class="string">"西安"</span>,<span class="string">"厦门"</span>,<span class="string">"上海"</span>};</span><br><span class="line">        <span class="type">Random</span> <span class="variable">rs</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">80</span>; i++) {</span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> rs.nextInt(names.length);</span><br><span class="line">            locations.add(names[index]);</span><br><span class="line">        }</span><br><span class="line">        System.out.println(locations);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.统计每个景点被选择的次数</span></span><br><span class="line">        Map&lt;String,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        System.out.println(map);</span><br><span class="line">        <span class="keyword">for</span> (String location : locations){</span><br><span class="line"><span class="comment">//            if (map.containsKey(location)){</span></span><br><span class="line"><span class="comment">//                map.put(location,map.get(location) + 1);</span></span><br><span class="line"><span class="comment">//            }else{</span></span><br><span class="line"><span class="comment">//                map.put(location,1);</span></span><br><span class="line"><span class="comment">//            }</span></span><br><span class="line">            <span class="comment">// 三元运算符优化代码</span></span><br><span class="line">            map.put(location,map.containsKey(location) ? map.get(location) + <span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 把map集合遍历出来</span></span><br><span class="line">        map.forEach((k,v) -&gt; System.out.println(k + <span class="string">"被选择了"</span> + v + <span class="string">"次"</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="Stream流"><a href="#Stream流" class="headerlink" title="Stream流"></a>Stream流</h3><p>JDk8开始，可以用于操作集合或数组的数据</p>
<p>优势：Stream流大量结合了Lambda语法风格，代码简介，可读性好</p>
<p>Api：<code>startWith() </code>方法，判断字符串是否有某个字符</p>
<p>用法：</p>
<p>​	1.调用<code>stream（）</code>方法（集合调用）</p>
<ul>
<li>list.stream()  类似工厂传送带</li>
<li>.flters()   过滤器（可选调）</li>
<li>.collect()   收集到新list</li>
</ul>
<p><strong>获取stream（）流方法</strong></p>
<p>​	集合	stream()</p>
<p>​	数组	stream() 获当前数组的stream流</p>
<p>​			of()  获取当前接受数据的stream流</p>
<p>​			.count()   计算Arrays中数据个数</p>
<p><strong>工作模式： 数据源（集合/数组/….）  -&gt;  过滤-排序-去重-….(中间方法)  -&gt;  获取结果</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collector;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 认识stream流，掌握基本使用步骤，体会优势和特点</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">"张无忌"</span>);</span><br><span class="line">        list.add(<span class="string">"赵敏"</span>);</span><br><span class="line">        list.add(<span class="string">"周芷若"</span>);</span><br><span class="line">        list.add(<span class="string">"张三丰"</span>);</span><br><span class="line">        list.add(<span class="string">"张翠山"</span>);</span><br><span class="line">        list.add(<span class="string">"张强"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.传统方案找法,创建姓张的新集合</span></span><br><span class="line">        List&lt;String&gt; newList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(String name : list){</span><br><span class="line">            <span class="keyword">if</span> (name.startsWith(<span class="string">"张"</span>) &amp;&amp; name.length() == <span class="number">3</span>){</span><br><span class="line">                newList.add(name);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        System.out.println(newList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.使用stream流解决</span></span><br><span class="line">        List&lt;String&gt; newlist2 = list.stream().filter(name -&gt; name.startsWith(<span class="string">"张"</span>)).filter(s -&gt; s.length() == <span class="number">3</span>).collect(Collectors.toList());</span><br><span class="line">        System.out.println(newlist2);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>操作（stream）：</strong></p>
<ul>
<li>filter – 过滤</li>
<li>sorted  – 元素进行升序排序</li>
<li>sorted(Comparator  &lt;?  super  T&gt;  Comparator)  –  指定排序规则</li>
<li>limit(long  maxsize)   获取前几个元素</li>
<li>skip(long  n)   跳过前几个元素</li>
<li>distinct()   去除流中重复元素</li>
<li>map    对流加工，返回新流</li>
<li>concat(stream  a, stream  b)   合并a，b为一个流</li>
</ul>
<p>tip：流只能收集一次</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Array;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collector;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDemo2</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 获取Stream流</span></span><br><span class="line">        <span class="comment">// 1.获取集合的Stream流的方法，调用集合提供的Stream（）方法</span></span><br><span class="line">        Collection&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Stream&lt;String&gt; s1 = list.stream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.map集合，怎么拿Stream流</span></span><br><span class="line">        Map&lt;String,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 单独获取键流,调用keySet（）</span></span><br><span class="line">        Stream&lt;String&gt; s2 = map.keySet().stream();</span><br><span class="line">        <span class="comment">// 获取值流</span></span><br><span class="line">        Stream&lt;Integer&gt; s3 = map.values().stream();</span><br><span class="line">        <span class="comment">// 获取键值对流</span></span><br><span class="line">        Stream&lt;Map.Entry&lt;String, Integer&gt;&gt; s4 = map.entrySet().stream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3。数组调用stream流</span></span><br><span class="line">        String[] names = {<span class="string">"张三丰"</span>,<span class="string">"张无忌"</span>,<span class="string">"张翠山"</span>,<span class="string">"张良"</span>,<span class="string">"张学友"</span>};</span><br><span class="line">        Stream&lt;String&gt; s5 = Arrays.stream(names);</span><br><span class="line">        System.out.println(s5.count()); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">        Stream&lt;String&gt; s6 = Stream.of(<span class="string">""</span>,<span class="string">""</span>,<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="斗地主GameTest："><a href="#斗地主GameTest：" class="headerlink" title="斗地主GameTest："></a>斗地主GameTest：</h3><p>主文件：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo4Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Game</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 斗地主游戏</span></span><br><span class="line">        <span class="comment">// 1.每张牌都是一个对象，定义牌类</span></span><br><span class="line">        <span class="comment">// 2.游戏房间是一个对象，定义房间类(54张牌)</span></span><br><span class="line">        <span class="type">Room</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Room</span>();</span><br><span class="line">        r.start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Card.java</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo4Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Card</span> {</span><br><span class="line">    <span class="keyword">private</span> String size;</span><br><span class="line">    <span class="keyword">private</span> String color;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> num;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">()</span>{}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">(String size, String color, <span class="type">int</span> num)</span> {</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">        <span class="built_in">this</span>.num = num;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSize</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSize</span><span class="params">(String size)</span> {</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getColor</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> color;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setColor</span><span class="params">(String color)</span> {</span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> size + <span class="string">'\''</span> + color + <span class="string">'\''</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNum</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNum</span><span class="params">(<span class="type">int</span> num)</span> {</span><br><span class="line">        <span class="built_in">this</span>.num = num;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Room.java(房间类，实现功能，调用start（）启动)</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo4Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Room</span> {</span><br><span class="line">    <span class="comment">// 1.准备54张牌，定义集合容器：存放54张牌</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Card&gt; allCards = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// 2.初始化54张牌，用实例代码块</span></span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// 3.准备点数</span></span><br><span class="line">        String[] sizes = {<span class="string">"3"</span>,<span class="string">"4"</span>,<span class="string">"5"</span>,<span class="string">"6"</span>,<span class="string">"7"</span>,<span class="string">"8"</span>,<span class="string">"9"</span>,<span class="string">"10"</span>,<span class="string">"J"</span>,<span class="string">"Q"</span>,<span class="string">"K"</span>,<span class="string">"A"</span>,<span class="string">"2"</span>};</span><br><span class="line">        <span class="comment">// 4.准备花色</span></span><br><span class="line">        String[] colors = {<span class="string">"♣"</span>,<span class="string">"♦"</span>,<span class="string">"♠"</span>,<span class="string">"♥"</span>};</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 5.组合点数和花色到牌对象中区</span></span><br><span class="line">        <span class="keyword">for</span> (String size : sizes){</span><br><span class="line">            num++;</span><br><span class="line">            <span class="keyword">for</span>(String color: colors){</span><br><span class="line">                <span class="type">Card</span> <span class="variable">card</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Card</span>(size,color,num);</span><br><span class="line">                allCards.add(card);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        Collections.addAll(allCards,<span class="keyword">new</span> <span class="title class_">Card</span>(<span class="string">""</span>,<span class="string">"🃏"</span>,++num), <span class="keyword">new</span> <span class="title class_">Card</span>(<span class="string">""</span>,<span class="string">"👲"</span>,++num) );</span><br><span class="line">        System.out.println(<span class="string">"新牌:"</span> + allCards);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// 8.洗牌：随机打乱集合中的顺序</span></span><br><span class="line">        Collections.shuffle(allCards);</span><br><span class="line">        System.out.println(<span class="string">"洗牌后："</span> + allCards);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 9.发牌 定义三个玩家,三个玩家都是集合容器</span></span><br><span class="line">        Map&lt;String,List&lt;Card&gt;&gt; palyers = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        List&lt;Card&gt; lhc = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        palyers.put(<span class="string">"令狐冲"</span>,lhc);</span><br><span class="line">        List&lt;Card&gt; lhw = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        palyers.put(<span class="string">"令狐白"</span>,lhw);</span><br><span class="line">        List&lt;Card&gt; lhp = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        palyers.put(<span class="string">"令狐紫"</span>,lhp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// allCards = {洗牌后的牌}</span></span><br><span class="line">        <span class="comment">// 只发51张牌，3张作底牌，每三张三张的发做轮询</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; allCards.size() - <span class="number">3</span>; i++) {</span><br><span class="line">            <span class="type">Card</span> <span class="variable">card</span> <span class="operator">=</span> allCards.get(i);</span><br><span class="line">            <span class="comment">// 求余算法为三个人发牌</span></span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span>){</span><br><span class="line">                lhc.add(card);</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(i % <span class="number">3</span> == <span class="number">1</span>){</span><br><span class="line">                lhw.add(card);</span><br><span class="line">            }<span class="keyword">else</span> {</span><br><span class="line">                lhp.add(card);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 10.对牌排序</span></span><br><span class="line">        sortCards(lhc);</span><br><span class="line">        sortCards(lhw);</span><br><span class="line">        sortCards(lhp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 三张底牌</span></span><br><span class="line">        List&lt;Card&gt; listCard = allCards.subList(allCards.size() - <span class="number">3</span>, allCards.size());</span><br><span class="line">        System.out.println(listCard);</span><br><span class="line">        <span class="comment">// 发底牌</span></span><br><span class="line">        lhp.addAll(listCard);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 11.看牌</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String,List&lt;Card&gt;&gt; entry : palyers.entrySet()){</span><br><span class="line">            <span class="comment">// 获取玩家名称</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="comment">// 获取玩家牌</span></span><br><span class="line">            List&lt;Card&gt; cards = entry.getValue();</span><br><span class="line">            <span class="comment">// 打印玩家牌</span></span><br><span class="line">            System.out.println(name + <span class="string">"的牌是："</span> + cards);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lambda简化代码后：</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sortCards</span><span class="params">(List&lt;Card&gt; cards)</span> {</span><br><span class="line">        Collections.sort(cards, (o1,o2) -&gt; o2.getNum() - o1.getNum());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>“…”写法：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span>...sums)</span>{</span><br><span class="line">    System.out.println(sums.length);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; sums.length; i++) {</span><br><span class="line">        System.out.println(sums[i]);</span><br><span class="line">    }</span><br><span class="line">    System.out.println(Arrays.toString(sums));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<hr>
<p>collections工具类（一般以s结尾）</p>
<p>提供常用方法：</p>
<table>
<thead>
<tr>
<th>addAll((name) , elements)</th>
<th>shuffle()</th>
<th>sort(List<t> list)</t></th>
<th>sort(List<t> list,comparator &lt;? super T&gt; c)</t></th>
</tr>
</thead>
<tbody><tr>
<td>批量加数组</td>
<td>打乱集合中元素顺序</td>
<td>对集合中元素进行升序排序</td>
<td>对list集合中元素进行批量比较器</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="I-x2F-O流（用于读写数据，文件或网络中数据）"><a href="#I-x2F-O流（用于读写数据，文件或网络中数据）" class="headerlink" title="I/O流（用于读写数据，文件或网络中数据）"></a>I/O流（用于读写数据，文件或网络中数据）</h3><p>File是 java.io 包下的类，用来代表当前操作系统的文件</p>
<p>注：file不能读写文件里存储的数据</p>
<p><code>new  File()</code>  方法创建文件夹操作</p>
<ul>
<li>mkdir()   创一个</li>
<li>mkdirs()  创多级文件夹</li>
<li>delete()  删除文件夹（只能删空文件夹）</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 掌握File创建对象代表文件（文件/目录），搞清楚其提供的对文件进行操作的方法</span></span><br><span class="line">        <span class="comment">// 1.创建File对象，获取对某个文件的信息</span></span><br><span class="line">        <span class="comment">// tip：可以反斜杠，java中两个反斜杠防止”\n“</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">""</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">f2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">""</span>);</span><br><span class="line">        System.out.println(f1.length());</span><br><span class="line">        System.out.println(f2.getName());</span><br><span class="line">        System.out.println(f1.isFile());</span><br><span class="line">        System.out.println(f2.isDirectory());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.使用相对路径定位文件对象</span></span><br><span class="line">        <span class="comment">// 只要带盘符的都是：绝对路径 F:/development/剪辑好精品/精品图片/photo_2025-10-06_16-43-36.jpg</span></span><br><span class="line">        <span class="comment">// 相对路径是不带盘符，默认到idea工程下寻找文件，一般用来寻找工程下的文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">"day03-File-io\\src\\demo1File\\benson_8"</span>);</span><br><span class="line">        System.out.println(f3.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建对象代表不存在路径</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">""</span>);</span><br><span class="line">        String[] names = f4.list();</span><br><span class="line">        <span class="keyword">for</span> (String name : names){</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        }</span><br><span class="line">        File[] files = f4.listFiles();</span><br><span class="line">        <span class="keyword">for</span> (File file : files){</span><br><span class="line">            <span class="comment">// 有一额file.delete()方法删除文件是真删，无法修复</span></span><br><span class="line">            System.out.println(file.getAbsoluteFile());</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>File类遍历文件夹方法：</p>
<ul>
<li>list()   所有一级文件名到一个字符串数组中返回</li>
<li>listFile()   所有一级文件对象到数组中返回</li>
</ul>
<h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><p>是一种算法，在程序设计语言中广泛应用，形式上，方法调用自身方法称为递归（会造成死循环，栈内存溢出）</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo1File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecursionDemo2</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 计算n的阶乘</span></span><br><span class="line">        System.out.println(f(<span class="number">5</span>));</span><br><span class="line">        System.out.println(sum(<span class="number">5</span>));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 典型的递归算法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n)</span>{</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> f(n-<span class="number">1</span>) * n;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 递归计算1+...n的和</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> n)</span>{</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> sum(n-<span class="number">1</span>) + n;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h3><p>标准ASCII字符集（包括英语，符号等）</p>
<p>使用一个字节存储一个字符，首位是0，共128个字符，对美国佬够用了</p>
<p>中国人：GBK（汉字内码扩展规范，目标）：</p>
<p>​	2w多个汉字等字符</p>
<p>​	<strong>GBK中一个字符，2个字节存储</strong></p>
<p>​	GBK兼容ASCII字符集</p>
<p>Unicode字符集（统一码，万国码）</p>
<p>​	UTF-32	4个字节表示1字符</p>
<p>​	UTF-8	 可变长编码方案（4个长度区：1，2，3，4个字节，中文为3字节）</p>
<p>编码方式：</p>
<table>
<thead>
<tr>
<th>0xxxxxxx</th>
<th>110xxxxx 10xxxxxx</th>
<th>111xxxxx 10xxxxxx 10xxxxxx</th>
<th>1111oxxx 10xxxxx 10xxxxxx</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
</tbody></table>
<p>tip：英文，数字不易乱码</p>
<p><strong>对字符的编码解码</strong></p>
<p>编码(String提供)：</p>
<ul>
<li>getBytes()</li>
<li>getBytes(String  charsetName)  指定字符集</li>
</ul>
<p>解码：</p>
<ul>
<li>String (byte[]  bytes)</li>
<li>String (byte[]  bytes,String  charsetName)  指定编码解码</li>
</ul>
<p>I/O流（程序和磁盘/网络直接操作）</p>
<p>I指input，称为输入流，把数据读到内存中</p>
<p>O指Output，称为输出流，负责写数据出去</p>
<p><strong>流方向：</strong></p>
<ul>
<li>输入流</li>
<li>输出流</li>
</ul>
<p><strong>流的内容：</strong></p>
<ul>
<li>字节流<ul>
<li>音频</li>
<li>视频</li>
<li>图片</li>
</ul>
</li>
<li>字符流<ul>
<li>读写txt，java文件</li>
</ul>
</li>
</ul>
<p><strong>I/O流四大金刚</strong></p>
<ol>
<li>字节输入流   InputStream</li>
<li>字节输出流   OutputStream</li>
<li>字符输入流   Reader</li>
<li>字符输出流   Writer</li>
</ol>
<p>以上为抽象类</p>
<p>tip：字节流不适合做中文读写，易乱码</p>
<p>处理方式：</p>
<p>​	1.定义一个与文件大小一样的字节数组，一次性读完文件的全部字节–小文件</p>
<p>​	2.读文本适合用字符流，字节流适合做数据转移，如：文本复制（非常合适）</p>
<p>扩展：每次读取多个字节，性能提升，减少硬盘和内存交换次数</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo4fileinputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">// 掌握文件输入流，读写字符数据</span></span><br><span class="line">        <span class="comment">// 创建文件字节输入流管道于源文件接通</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">"day03-File-io\\src\\demo4fileinputStream\\shilin"</span>);</span><br><span class="line">        <span class="comment">// 针对中文，将字节流转为字符流，指定UTF-8编码</span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is, <span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取文件中字节并输出（垃圾）</span></span><br><span class="line"><span class="comment">//        int n;</span></span><br><span class="line"><span class="comment">//        while((n = isr.read()) != -1){</span></span><br><span class="line"><span class="comment">//            // (char) 将字节转成字符</span></span><br><span class="line"><span class="comment">//            System.out.print((char)n);</span></span><br><span class="line"><span class="comment">//        }</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 每次读写一个字符：性能差，遇到中文乱码</span></span><br><span class="line">        <span class="comment">// 使用换行ln后中文单个打出，因为UTF-8中文占3哥字节byte【3】</span></span><br><span class="line">        <span class="comment">// 定义一个桶</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">3</span>];</span><br><span class="line">        <span class="comment">// 定义一个变量记住多少个字节</span></span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(buffer)) != -<span class="number">1</span>){</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buffer,<span class="number">0</span>,len);</span><br><span class="line">            System.out.print(str);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>一次性读完全部字节：</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo4fileinputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.security.jgss.GSSUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputDemo2</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">"day03-File-io\\src\\demo4fileinputStream\\shiqi"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 一次性读完全部字节，避免汉字输出乱码问题，但是又可以内存溢出</span></span><br><span class="line">        <span class="comment">// readAllBytes（），但是文件会内存溢出问题</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = f1.readAllBytes();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将字节流转为字符串输出</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line">        System.out.println(rs);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>字节输出流操作：</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo5fileoutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">fileOutputStreamDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">// 学会使用文件字节输出流  FileOutputStream</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">"day03-File-io/src/shiqi.txt"</span>,<span class="literal">true</span>);</span><br><span class="line">        os.write(<span class="string">'a'</span>);</span><br><span class="line">        os.write(<span class="number">98</span>);</span><br><span class="line">        os.write(<span class="string">"\r\n"</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写一个字节数组出去</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="string">"我爱你杨诗琦"</span>.getBytes();</span><br><span class="line">        os.write(bytes);</span><br><span class="line">        os.write(<span class="string">"\r\n"</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写一个字符数组的一部分出去</span></span><br><span class="line">        os.write(bytes,<span class="number">0</span>,<span class="number">3</span>);</span><br><span class="line">        os.write(<span class="string">"\r\n"</span>.getBytes());</span><br><span class="line">        <span class="comment">// 关闭字节流，底层上性能更好</span></span><br><span class="line">        os.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>文件字符输出流读取字符内容到程序中（多态）：</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo7fileReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReaderDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">// 掌握文件字符输入流读取字符内容到程序中</span></span><br><span class="line">        <span class="comment">// 多态写法将字符流读出来</span></span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">                <span class="type">Reader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">"day03-File-io\\src\\shiqi02.txt"</span>);</span><br><span class="line">                ) {</span><br><span class="line">            <span class="type">char</span>[] chs = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">3</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fr.read(chs)) != -<span class="number">1</span>){</span><br><span class="line">                <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(chs,<span class="number">0</span>,len);</span><br><span class="line">                System.out.print(str);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p>Api：<code>readAllBytes()</code>  一次性读完全部字节</p>
<p>​	<code>.getByte()</code>  转字符数组</p>
<p>​	<code>os.write("\r\n".getByte())</code>  //换行</p>
<p>byte：基本数据类型（字节数组，I/O流操作）</p>
<p>Byte：包装类（泛型，集合等场景）</p>
<h3 id="资源释放方案"><a href="#资源释放方案" class="headerlink" title="资源释放方案"></a>资源释放方案</h3><p><code>try-catch-finally</code>  ，finally必须执行一次，除非JVM终止</p>
<p>作用：程序执行后进行资源释放操作（专业级操作）</p>
<p><code>try-with-resource</code>   在try()的括号里面自动调<code>.close()</code>方法，源码继承<code>Autodoseable</code>接口</p>
<p>​	tip：只能释放资源对象（InputStream,OutputStream）</p>
<h3 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h3><p><code>char[] chs = new char[3];</code>  // 和字节流对象区别</p>
<p>Reader   管道上加上“true”在link后面，不会覆盖原内容</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo8filedemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">fileWriteDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 搞清楚文件字符输出流的使用，写字符出去的流</span></span><br><span class="line">        <span class="comment">// 1.创建一个字符输出流对象，搞清楚写出去目的地</span></span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">                <span class="comment">// 管道加上true就不会删原来数据</span></span><br><span class="line">                <span class="type">Writer</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">"day03-File-io\\src\\shiqi03.txt"</span>,<span class="literal">true</span>); <span class="comment">// 覆盖管道，把原来内容覆盖掉</span></span><br><span class="line">                ){</span><br><span class="line">            fw.write(<span class="string">"liushilin"</span>);</span><br><span class="line">            <span class="comment">// 换行符</span></span><br><span class="line">            fw.write(<span class="string">"\r\n"</span>);</span><br><span class="line"></span><br><span class="line">            fw.write(<span class="number">97</span>);</span><br><span class="line">            fw.write(<span class="string">"java"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 写一个字符数组出去</span></span><br><span class="line">            <span class="type">char</span>[] chars = <span class="string">"java"</span>.toCharArray();</span><br><span class="line">            fw.write(chars);</span><br><span class="line">            fw.write(<span class="string">"\r\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 写字符数组的一部分出去</span></span><br><span class="line">            fw.write(chars,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p><strong>执行顺序：</strong></p>
<p>编码 – 》 内存缓冲区 –I/O–》文件</p>
<p>（避免多次I/O操作）</p>
<p>​	<code>.flush()</code> 刷新缓冲区</p>
<p>​	<code>.close()</code>  关闭包含的刷新</p>
<p>文件复制-字节流</p>
<p>读文件-字符流</p>
<p><strong>缓冲流Buffered：</strong></p>
<table>
<thead>
<tr>
<th>InputStream</th>
<th>OutputStream</th>
</tr>
</thead>
<tbody><tr>
<td>FileInputStream</td>
<td>FileOutputStream</td>
</tr>
<tr>
<td>BufferedInputStream</td>
<td>BufferedOutputStream</td>
</tr>
</tbody></table>
<p>作用：提高字节输入流读取数据的性能</p>
<p><strong>原理：输入，输出字节8kb的缓冲池</strong></p>
<p>字符输入：<code>.readline()</code> 换行读文本，循环全读（按行读取，目前读取文本最优雅方案）</p>
<p>字符输入：<code>.newline()</code> </p>
<p>tip：idea快读更改多个命名方式： shift + F6</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo9bufferedInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedReaderDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 搞清楚缓冲字符输入流读取字符内容，性能也提升了，多了按行读文本的能力</span></span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">                <span class="type">Reader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">"day03-File-io\\src\\shiqi02.txt"</span>);</span><br><span class="line">                <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fr);</span><br><span class="line">        ) {</span><br><span class="line"><span class="comment">//            char[] chs = new char[3];</span></span><br><span class="line"><span class="comment">//            int len;</span></span><br><span class="line"><span class="comment">//            while((len = fr.read(chs)) != -1){</span></span><br><span class="line"><span class="comment">//                String str = new String(chs,0,len);</span></span><br><span class="line"><span class="comment">//                System.out.print(str);</span></span><br><span class="line"><span class="comment">//            }</span></span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>){</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>出师表案例：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo9bufferedInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedTest1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 完成《出师表》行乱排序问题</span></span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">""</span>));</span><br><span class="line">                <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">""</span>));</span><br><span class="line">        ) {</span><br><span class="line">            List&lt;String&gt; list= <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>){</span><br><span class="line">                list.add(line);</span><br><span class="line">            }</span><br><span class="line">            Collections.sort(list);</span><br><span class="line">            System.out.println(list);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(String s  : list){</span><br><span class="line">                bw.write(s);</span><br><span class="line">                bw.newLine();</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>缓冲字节流方式：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">ackage demo9bufferedInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CopyDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 掌握缓冲字节流的使用</span></span><br><span class="line">        <span class="comment">// 源文件：</span></span><br><span class="line">        <span class="comment">// 目标地址：(复制过去一定要带文件名，无法生成文件名)</span></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            copyFile(<span class="string">""</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     类型	含义	用途</span></span><br><span class="line"><span class="comment">     byte	基本数据类型	字节数组，IO 流操作</span></span><br><span class="line"><span class="comment">     Byte	包装类	泛型、集合等场景</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> destPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 复制文件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(String srcPath,String destPath)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            fis = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcPath);</span><br><span class="line">            fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destPath);</span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read(buffer))  != -<span class="number">1</span>){</span><br><span class="line">                <span class="comment">// 1024  1024  3，写入到len长度</span></span><br><span class="line">                fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">"复制成功！"</span>);</span><br><span class="line">            <span class="comment">// 关闭流，但是这种有问题</span></span><br><span class="line">            fos.close();</span><br><span class="line">            fis.close();</span><br><span class="line">        } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">// 经典套娃写法解决资源释放问题</span></span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="keyword">if</span> (fis != <span class="literal">null</span>) {</span><br><span class="line">                    fis.close();</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (fos != <span class="literal">null</span>) {</span><br><span class="line">                fos.close();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p><strong>性能分析（原始流/缓冲流）：</strong></p>
<p>测试用例：复制一个超大视频</p>
<p>拿系统当前时间方式：<code>System.currentTimeMillis()</code> 时间毫秒值（从1970-1-1  00:00:00开始  1s=1000ms）</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo9bufferedInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.Buffer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeTest3</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SRC_FILE</span> <span class="operator">=</span> <span class="string">"F:\\development\\omg\\2025-03-13_19-22-58.mp4"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEST_FILE</span> <span class="operator">=</span> <span class="string">"F:\\development\\剪辑好精品"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 缓冲流和原始流性能分析</span></span><br><span class="line">        <span class="comment">// 简直是个垃圾</span></span><br><span class="line"><span class="comment">//        copyFile1();</span></span><br><span class="line">        <span class="comment">// 使用低级字节流按照字节数组方式复制文件</span></span><br><span class="line">        <span class="comment">// buffered 加大，低级管道也有可能比高级管道更快</span></span><br><span class="line">        copyFile2();</span><br><span class="line">        <span class="comment">// 使用高级的缓冲字节流一个一个字节形式复制文件</span></span><br><span class="line"><span class="comment">//        copyFile3();</span></span><br><span class="line">        <span class="comment">// 使用高级的缓冲流字节数组形式复制文件</span></span><br><span class="line">        copyFile4();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用高级的缓冲流字节数组形式复制文件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile4</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE));</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">"2.avi"</span>));</span><br><span class="line">        ) {</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read(bytes)) != -<span class="number">1</span>){</span><br><span class="line">                fos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"使用高级的缓冲流字节数组形式复制文件时间是："</span> + (end - start)/<span class="number">1000</span> + <span class="string">"s"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用高级的缓冲字节流一个一个字节形式复制文件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile3</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE));</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">"2.avi"</span>));</span><br><span class="line">        ) {</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read()) != -<span class="number">1</span>){</span><br><span class="line">                fos.write(len);</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"使用高级的缓冲字节流一个一个字节形式复制文件时间是："</span> + (end - start)/<span class="number">1000</span> + <span class="string">"s"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用低级字节流按照字节数组方式复制文件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile2</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE);</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">"2.avi"</span>)</span><br><span class="line">        ) {</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];  <span class="comment">// 1kb</span></span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read(bytes)) != -<span class="number">1</span>){</span><br><span class="line">                fos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"低级字节流按照字节数组形式复制文件时间是："</span> + (end - start)/<span class="number">1000</span> + <span class="string">"s"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用原始流一个一个字节复制文件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile1</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(SRC_FILE);</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(DEST_FILE + <span class="string">"1.avi"</span>);</span><br><span class="line">        ) {</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read()) != -<span class="number">1</span>){</span><br><span class="line">                fos.write(len);</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"低级字节流按照一个一个字节形式复制文件时间是："</span> + (end-start)/<span class="number">1000</span> + <span class="string">"s"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>结果：buffered缓冲池加大，低级管道也有可能比高级快。</strong></p>
<p><strong>输入输入流，结合字节数组是最优性能</strong></p>
<p>特：字符输入<strong>转换流</strong> <code>InputStreamReader</code>  ，解决不同编码，字符流读取文本乱码问题</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo10inputstreamreader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 不同编码读取乱码的问题</span></span><br><span class="line">        <span class="comment">// 思想：先提取文件原始字节流</span></span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="comment">// 拿到GBK的字节原始流</span></span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">"day03-File-io\\src\\shiqi04.txt"</span>);</span><br><span class="line">                <span class="comment">// 使用InputStreamReader（）将GBK指定原始字节流解析</span></span><br><span class="line">                <span class="type">Reader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is,<span class="string">"GBK"</span>);</span><br><span class="line">                <span class="comment">// 转为高级缓冲流</span></span><br><span class="line">                <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">        ) {</span><br><span class="line">            String len;</span><br><span class="line">            <span class="keyword">while</span>((len = br.readLine()) != <span class="literal">null</span>){</span><br><span class="line">                System.out.println(len);</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="打印流"><a href="#打印流" class="headerlink" title="打印流"></a>打印流</h3><p>printStream/printWrite  (字节/字符)</p>
<p><strong>特殊数据流：</strong> <code>DataInputStream</code> <code>DataOutputStream</code>   (允许数据类型一并写出)</p>
<p>I/O框架（Framework）  </p>
<p><strong>用的“<a target="_blank" rel="noopener" href="https://commons.apache.org/io/download_io.cgi%E2%80%9D">https://commons.apache.org/io/download_io.cgi”</a>  Apache的commons  IO的jar包</strong></p>
<p><strong>用法：</strong>导入commons-io-2.11.0.jar，项目中新建” .lib “库文件，在jar包文件右键，”Add  ad  Library”	(在类包中使用，否则无法导入)</p>
<p><strong>打印流使用：</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> printstream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">printStreamDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 打印流使用</span></span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">                <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="string">"day03-File-io/src/ps.txt"</span>);</span><br><span class="line">                ){</span><br><span class="line">            ps.println(<span class="number">97</span>);</span><br><span class="line">            ps.println(<span class="string">'a'</span>);</span><br><span class="line">            ps.println(<span class="string">"你是个傻逼"</span>);</span><br><span class="line">            ps.println(<span class="literal">true</span>);</span><br><span class="line">            ps.println(<span class="number">99.9</span>);</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>特殊数据流</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> printstream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">dataStreamDemo2</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 特殊数据流</span></span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">                <span class="type">DataOutputStream</span> <span class="variable">dos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">"day03-File-io/src/data.txt"</span>));</span><br><span class="line">                ){</span><br><span class="line">                <span class="comment">// 写出的文件不是乱码，是带了类型的</span></span><br><span class="line">                dos.writeByte(<span class="string">'a'</span>);</span><br><span class="line">                dos.writeUTF(<span class="string">"nihao"</span>);</span><br><span class="line">                dos.writeInt(<span class="number">97</span>);</span><br><span class="line">                dos.writeDouble(<span class="number">99.9</span>);</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="多线程（思想-gt-代码）Thread"><a href="#多线程（思想-gt-代码）Thread" class="headerlink" title="多线程（思想>代码）Thread"></a>多线程（思想&gt;代码）Thread</h3><p><strong>创建方式1：</strong></p>
<ol>
<li>定义一个子类<code>MyThread</code> 类继承 java.lang.Thread，重写<code>run()</code> 方法</li>
<li>创建 <code>Mythread</code> 类对象</li>
<li>调用线程的<code>start()</code>对象启动线程（启动后执行run()）</li>
</ol>
<p>缺点：单继承</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo1create;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo1create</span> {</span><br><span class="line">    <span class="comment">// main方法本身是有一条主线程负责执行的</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 认识多线程，掌握创建线程的方式一,继承thread类实现</span></span><br><span class="line">        <span class="comment">// 4.创建线程类对象，代表线程</span></span><br><span class="line">        <span class="type">MyTread</span> <span class="variable">myTread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyTread</span>();</span><br><span class="line">        <span class="comment">// 5.调用start方法，启动线程</span></span><br><span class="line">        myTread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) {</span><br><span class="line">            System.out.println(<span class="string">"主线程输出："</span> + i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>{</span><br><span class="line">    <span class="comment">// 2. 重写Thread的run方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>{</span><br><span class="line">        <span class="comment">// 3.在run方法中编写线程的任务代码</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span><br><span class="line">            System.out.println(<span class="string">"子线程已经启动："</span> + i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>创建方式2</strong></p>
<ol>
<li>定义线程任务类<code>MyRunnable</code>实现接口<code>Runnable</code>接口，重写<code>run()</code>方法</li>
<li>创建<code>MyRunnable</code>对象</li>
<li>把<code>MyRunnable</code> 任务对象交给Thread线程对象处理</li>
<li>调<code>start()</code>启动</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo1create;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadDemo2</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 掌握多线程的创建方式二：实现Runnable接口来创建</span></span><br><span class="line">        <span class="comment">// 3.创建线程任务类代表一个线程</span></span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">myRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="comment">// 4.把线程任务对象交给一个线程对象来处理</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable);</span><br><span class="line">        <span class="comment">// 5.启动线程任务对象</span></span><br><span class="line">        r.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span><br><span class="line">            System.out.println(<span class="string">"主线程执行开跑："</span> + i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.定义一个线程任务类来实现Runnable接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>{</span><br><span class="line">    <span class="comment">// 2.重写run方法设置线程</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span><br><span class="line">            System.out.println(<span class="string">"子线程启动："</span> + i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>创建方式3</strong></p>
<p><strong>可以返回线程执行完毕后的结果</strong></p>
<p><strong>利用Callable接口，FutureTask类来实现</strong></p>
<ol>
<li>定个类实现<code>Callable</code>接口，重写call方法，封装要做的事，返回数据</li>
<li>把<code>Callable</code>类型对象封装成<code>FutureTask</code>（线程任务对象）</li>
<li>调Thread对象的start()方法启动线程</li>
<li>调用<code>FutureTack</code>的<code>get</code>方法获返回结果</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo1create;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadDemo3</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 创建线程的第三种方式</span></span><br><span class="line">        <span class="comment">// 实现Callable接口，优势，获得线程执行完毕后的返回值</span></span><br><span class="line">        <span class="comment">// 3.创建Callable接口的实现对象</span></span><br><span class="line">        Callable&lt;String&gt; mc = <span class="keyword">new</span> <span class="title class_">MyCallable</span>(<span class="number">100</span>);</span><br><span class="line">        <span class="comment">// 4.包装成FutureTask线程任务对象</span></span><br><span class="line">        FutureTask&lt;String&gt; ft = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 未来对象作用</span></span><br><span class="line"><span class="comment">         * 本质是一个Runnable线程任务对象，可以交给Thread线程对象处理</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// 5.调用Tread方法的start方法启动线程</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">tr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft);</span><br><span class="line">        tr.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 线程2：</span></span><br><span class="line">        Callable&lt;String&gt; mt = <span class="keyword">new</span> <span class="title class_">MyCallable</span>(<span class="number">50</span>);</span><br><span class="line">        FutureTask&lt;String&gt; f1 = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mt);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">tr2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(f1);</span><br><span class="line">        tr2.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.调用FutureTask里的get方法获取返回值</span></span><br><span class="line">        <span class="comment">// 这里get方法异常，建议分开try  catch(不同线程异常之间不容易混杂)</span></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// 如果主线程发现第一个线程还没执行完毕，会让出cpu，等第一个线程执行完毕后，才会往下执行</span></span><br><span class="line">            System.out.println(ft.get());</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// 如果主线程发现第二个线程还没执行完毕，会让出cpu，等第一个线程执行完毕后，才会往下执行</span></span><br><span class="line">            System.out.println(f1.get());</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个实现类实现Callable接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt;{</span><br><span class="line">    <span class="comment">// 有参构造器接受传参</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCallable</span><span class="params">(<span class="type">int</span> n)</span>{</span><br><span class="line">        <span class="built_in">this</span>.n = n;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 实现call方法，定义线程执行体</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= n; i++) {</span><br><span class="line">            System.out.println(i);</span><br><span class="line">            sum += i;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"子线程返回的结果"</span> + n + <span class="string">"的和是："</span> + sum;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>获取线程名字：</strong>Thread-索引（默认）</p>
<p>方法：</p>
<ul>
<li>getName()  方法</li>
<li>currentThread()  Thread方法获主线程</li>
<li>setName()  设置线程名</li>
<li>join()  线程插队</li>
</ul>
<p><strong>线程睡眠（sleep()，百度网盘不冲会员限速类似）</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo2threadapi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadApiDemo2</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 线程休眠sleep（）</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            System.out.println(i);</span><br><span class="line">            <span class="keyword">try</span>{</span><br><span class="line">                <span class="comment">// 这一行代码几万块</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>join()方法：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo2threadapi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadApiDemo3</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 搞清楚线程的join方法  调用这个方法的线程先执行（线程插队）</span></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>(<span class="string">"小琦"</span>);</span><br><span class="line">        t.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"线程输出："</span> + i);</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">1</span>){</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    t.join();  <span class="comment">// 线程插队</span></span><br><span class="line">                } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>{</span><br><span class="line">    <span class="keyword">public</span>  <span class="title function_">MyThread2</span><span class="params">(String name)</span>{</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"子线程输出是："</span> + i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="线程安全问题"><a href="#线程安全问题" class="headerlink" title="线程安全问题"></a>线程安全问题</h3><p>多个线程，同时操作同一个共享资源时，业务安全问题（银行取钱问题）</p>
<p><strong>解决方案：</strong></p>
<p>线程同步，让多个线程先后依次访问共享资源（加锁，每次只允许一个线程加锁）</p>
<p><em>模拟线程安全</em></p>
<p>threadDemo1.java:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3threadsafe;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">threadDemo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// 模拟线程安全问题</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">acc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="string">"ICBC-01"</span>,<span class="number">100000</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">DrawThread</span>(<span class="string">"小刘"</span>,acc).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">DrawThread</span>(<span class="string">"小杨"</span>,acc).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>DrawThread.java:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3threadsafe;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DrawThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>{</span><br><span class="line">    <span class="keyword">private</span> Account acc;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DrawThread</span><span class="params">(String name,Account acc)</span> {</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.acc = acc;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>{</span><br><span class="line">        acc.drawMoney(<span class="number">100000</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Account.java:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3threadsafe;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> {</span><br><span class="line">    <span class="keyword">private</span> String cardId;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">()</span>{}</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(String cardId, <span class="type">double</span> money)</span> {</span><br><span class="line">        <span class="built_in">this</span>.cardId = cardId;</span><br><span class="line">        <span class="built_in">this</span>.money = money;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCardId</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> cardId;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCardId</span><span class="params">(String cardId)</span> {</span><br><span class="line">        <span class="built_in">this</span>.cardId = cardId;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getMoney</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMoney</span><span class="params">(<span class="type">double</span> money)</span> {</span><br><span class="line">        <span class="built_in">this</span>.money = money;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawMoney</span><span class="params">(<span class="type">double</span> money)</span>{</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.money &gt;= money){</span><br><span class="line">            System.out.println(name + <span class="string">"取钱成功，吐出了："</span> + <span class="built_in">this</span>.money + <span class="string">"元"</span>);</span><br><span class="line">            <span class="built_in">this</span>.money -= money;</span><br><span class="line">            System.out.println(name + <span class="string">"取钱成功，余额剩下："</span> + <span class="built_in">this</span>.money + <span class="string">"CNY"</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            System.out.println(name + <span class="string">"取钱失败，余额不足"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p><strong>方式一（同步代码块）：</strong></p>
<p>原理：每次只允许一个线程加锁后进入，执行完毕后自动解锁，其他线程才可执行</p>
<p>使用：synchronized(同步锁){  访问核心代码块  } 		（锁对象）</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调整Account文件里的这个部分，用"this"作为锁对象</span></span><br><span class="line"><span class="comment">// 用this账户作为他们的锁</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawMoney</span><span class="params">(<span class="type">double</span> money)</span>{</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>) {</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.money &gt;= money){</span><br><span class="line">                System.out.println(name + <span class="string">"取钱成功，吐出了："</span> + <span class="built_in">this</span>.money + <span class="string">"元"</span>);</span><br><span class="line">                <span class="built_in">this</span>.money -= money;</span><br><span class="line">                System.out.println(name + <span class="string">"取钱成功，余额剩下："</span> + <span class="built_in">this</span>.money + <span class="string">"CNY"</span>);</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                System.out.println(name + <span class="string">"取钱失败，余额不足"</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>锁的选择：</strong>无static称实例方法。锁对象不能随便选择唯一对象，建议使用共享资源作为锁对象，<strong>实例方法用this作锁对象。对静态资源建议用字节码（类名.class） 对象作为锁对象</strong></p>
<hr>
<p><strong>方式二同步方法：</strong></p>
<p>把核心方法（共享的）上锁，<strong>修饰符  <code>synchronized</code>   返回值类型   方法名称（形参列表）{  操作共享资源代码  }</strong></p>
<p><strong>Lock锁</strong></p>
<p><code>private final lock lk = new ReentrantLock();</code> // final 防止撬锁</p>
<p>lk.lock()  上锁</p>
<p>lk.unlock()  解锁，放try - Finally 这里解锁，防异常</p>
<p>区别部分操作：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawMoney</span><span class="params">(<span class="type">double</span> money)</span>{</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();</span><br><span class="line">        lk.lock();</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.money &gt;= money){</span><br><span class="line">                System.out.println(name + <span class="string">"取钱成功，吐出了："</span> + <span class="built_in">this</span>.money + <span class="string">"元"</span>);</span><br><span class="line">                <span class="built_in">this</span>.money -= money;</span><br><span class="line">                System.out.println(name + <span class="string">"取钱成功，余额剩下："</span> + <span class="built_in">this</span>.money + <span class="string">"CNY"</span>);</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                System.out.println(name + <span class="string">"取钱失败，余额不足"</span>);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            lk.unlock();</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3><p>任务对象：workQueue</p>
<p>工作线程：workThread</p>
<p>任务接口：Runnable/Callable</p>
<p>思想：线程复用</p>
<p>方式1：</p>
<p>​	JDK5.0起提供了线程池接口：<code>ExecutorService</code> ,实现类 <code>ThreadPoolExecutor</code></p>
<p>方式2：</p>
<p>​	使用<code>Executor</code>线程池工具类，调用方法返回不同特点的线程池对象</p>
<p>一·，通过ThreadPoolExecutor创线程池对象</p>
<ol>
<li>参数1，corePoolSize：指定线程池核心线程数   （正式工：2）</li>
<li>maximumPoolSize：指定池最大线程数   （最大员工：5，临时工：2）</li>
<li>keepAliveTime：指定临时线程存活时间   （临时工空闲多久被开除）</li>
<li>unit：指定线程存活时间单位（秒，分，时，天）  </li>
<li>workQueue：指定线程池任务队列    （客人排队的地方）</li>
<li>threadFactory：指定线程工厂      （负责招聘员工的 ）</li>
<li>handler：指定线程池任务拒绝策略      （忙不过来咋办）</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Doctor Liu</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://example.com/2025/11/15/javaEE%E5%8A%A0%E5%BC%BA/">http://example.com/2025/11/15/javaEE%E5%8A%A0%E5%BC%BA/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint policy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Doctor Liu</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">No tag</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">我会加油的！</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;Current
            </div>
            <div class="card">
                <a href="/2025/11/15/javaEE%E5%8A%A0%E5%BC%BA/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/4.jpg" class="responsive-img" alt="javaEE加强">
                        
                        <span class="card-title">javaEE加强</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2025-11-15
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/java/" class="post-category">
                                    java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2025/11/15/java%E9%AB%98%E7%BA%A7/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="java高级">
                        
                        <span class="card-title">java高级</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2025-11-15
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/java/" class="post-category">
                                    java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023-2025</span>
            
            <a href="/about" target="_blank">Doctor Liu</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
                <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" href="javascript:translatePage();">繁</a>
            
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;Total Words:&nbsp;<span
                        class="white-color">16.4k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;Total visits:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;Total visitors:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/bensonFuck" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:benson_8@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3522500575" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 3522500575" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        <script type="text/javascript" src="/js/tw_cn.js"></script>
        <script type="text/javascript">
          var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
          var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
          var cookieDomain = "http://example.com"; //Cookie地址, 一定要设定, 通常为你的网址
          var msgToTraditionalChinese = "繁"; //此处可以更改为你想要显示的文字
          var msgToSimplifiedChinese = "简"; //同上，但两处均不建议更改
          var translateButtonId = "translateLink"; //默认互换id
          translateInitilization();
        </script>
    
    
    

    <!-- 雪花特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>');
            }
        </script>
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
